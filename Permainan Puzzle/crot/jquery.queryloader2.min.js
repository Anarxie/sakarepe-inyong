/*
 * QueryLoader v2 - A simple script to create a preloader for images
 *
 * For instructions read the original post:
 * http://www.gayadesign.com/diy/queryloader2-preload-your-images-with-ease/
 *
 * Copyright (c) 2011 - Gaya Kessler
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Version:  2.8.1
 * Last update: 2013-11-21
 */
!function(e){function k(a){this.parent=a;this.container;this.loadbar;this.percentageContainer}function g(a){this.toPreload=[];this.parent=a;this.container}function h(a){this.element;this.parent=a}function c(a,b){this.element=a;this.$element=e(a);this.options=b;this.foundUrls=[];this.destroyed=!1;this.imageDone=this.imageCounter=0;this.alreadyLoaded=!1;this.preloadContainer=new g(this);this.overlayLoader=new k(this);this.defaultOptions={onComplete:function(){},backgroundColor:"#000",barColor:"#fff", overlayId:"qLoverlay",barHeight:1,percentage:!1,deepSearch:!0,completeAnimation:"fade",minimumTime:500};this.init()}k.prototype.createOverlay=function(){var a="absolute";if("body"==this.parent.element.tagName.toLowerCase())a="fixed";else{var b=this.parent.$element.css("position");"fixed"==b&&"absolute"==b||this.parent.$element.css("position","relative")}this.container=e("<div id='"+this.parent.options.overlayId+"'></div>").css({width:"100%",height:"100%",backgroundColor:this.parent.options.backgroundColor, backgroundPosition:"fixed",position:a,zIndex:666999,top:0,left:0}).appendTo(this.parent.$element);this.loadbar=e("<div id='qLbar'></div>").css({height:this.parent.options.barHeight+"px",marginTop:"-"+this.parent.options.barHeight/2+"px",backgroundColor:this.parent.options.barColor,width:"0%",position:"absolute",top:"50%"}).appendTo(this.container);1==this.parent.options.percentage&&(this.percentageContainer=e("<div id='qLpercentage'></div>").text("0%").css({height:"40px",width:"100px",position:"absolute", fontSize:"3em",top:"50%",left:"50%",marginTop:"-"+(59+this.parent.options.barHeight)+"px",textAlign:"center",marginLeft:"-50px",color:this.parent.options.barColor}).appendTo(this.container));this.parent.preloadContainer.toPreload.length&&1!=this.parent.alreadyLoaded||this.parent.destroyContainers()};k.prototype.updatePercentage=function(a){this.loadbar.stop().animate({width:a+"%",minWidth:a+"%"},200);1==this.parent.options.percentage&&this.percentageContainer.text(Math.ceil(a)+"%")};g.prototype.create= function(){this.container=e("<div></div>").appendTo("body").css({display:"none",width:0,height:0,overflow:"hidden"});this.processQueue()};g.prototype.processQueue=function(){for(var a=0;this.toPreload.length>a;a++)this.parent.destroyed||this.preloadImage(this.toPreload[a])};g.prototype.addImage=function(a){this.toPreload.push(a)};g.prototype.preloadImage=function(a){var b=new h;b.addToPreloader(this,a);b.bindLoadEvent()};h.prototype.addToPreloader=function(a,b){this.element=e("<img />").attr("src", b);this.element.appendTo(a.container);this.parent=a.parent};h.prototype.bindLoadEvent=function(){this.parent.imageCounter++;var a=this.element.attr("src");this.element.removeAttr("src");var b=this;setTimeout(function(){b.element.on("load error",b,function(a){a.data.completeLoading()});b.element.attr("src",a)},1)};h.prototype.completeLoading=function(){this.parent.imageDone++;this.parent.overlayLoader.updatePercentage(this.parent.imageDone/this.parent.imageCounter*100);this.parent.imageDone==this.parent.imageCounter&& this.parent.endLoader()};c.prototype.init=function(){if(this.options=e.extend({},this.defaultOptions,this.options),this.findImageInElement(this.element),1==this.options.deepSearch)for(var a=this.$element.find("*:not(script)"),b=0;b<a.length;b++)this.findImageInElement(a[b]);this.preloadContainer.create();this.overlayLoader.createOverlay()};c.prototype.findImageInElement=function(a){var b="",c=e(a),d="normal";if("none"!=c.css("background-image")?(b=c.css("background-image"),d="background"):"undefined"!= typeof c.attr("src")&&"img"==a.nodeName.toLowerCase()&&(b=c.attr("src")),!this.hasGradient(b))for(b=this.stripUrl(b),a=b.split(", "),b=0;b<a.length;b++)if(this.validUrl(a[b])&&this.urlIsNew(a[b])){var f="";this.isIE()||this.isOpera()?(f="?rand="+Math.random(),this.preloadContainer.addImage(a[b]+f)):"background"==d?this.preloadContainer.addImage(a[b]+f):(f=new h(this),f.element=c,f.bindLoadEvent());this.foundUrls.push(a[b])}};c.prototype.hasGradient=function(a){return-1==a.indexOf("gradient")?!1:!0}; c.prototype.stripUrl=function(a){return a=a.replace(/url\(\"/g,""),a=a.replace(/url\(/g,""),a=a.replace(/\"\)/g,""),a.replace(/\)/g,"")};c.prototype.isIE=function(){return navigator.userAgent.match(/msie/i)};c.prototype.isOpera=function(){return navigator.userAgent.match(/Opera/i)};c.prototype.validUrl=function(a){return 0<a.length&&!a.match(/^(data:)/i)?!0:!1};c.prototype.urlIsNew=function(a){return-1==this.foundUrls.indexOf(a)?!0:!1};c.prototype.destroyContainers=function(){this.destroyed=!0;this.preloadContainer.container.remove(); this.overlayLoader.container.remove()};c.prototype.endLoader=function(){this.destroyed=!0;this.onLoadComplete()};c.prototype.onLoadComplete=function(){waktu=setInterval(WaktuMundur,1E3);WaktuMundur();"grow"==this.options.completeAnimation?(this.overlayLoader.loadbar[0].parent=this,this.overlayLoader.loadbar.stop().animate({width:"100%"},500,function(){e(this).animate({top:"0%",width:"100%",height:"100%"},500,function(){this.parent.overlayLoader.container[0].parent=this.parent;this.parent.overlayLoader.container.fadeOut(500, function(){this.parent.destroyContainers();this.parent.options.onComplete()})})})):(this.overlayLoader.container[0].parent=this,this.overlayLoader.container.fadeOut(500,function(){this.parent.destroyContainers();this.parent.options.onComplete()}))};Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c=this.length>>>0,d=Number(b)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=c);c>d;d++)if(d in this&&this[d]===a)return d;return-1});e.fn.queryLoader2=function(a){return this.each(function(){new c(this, a)})}}(jQuery);